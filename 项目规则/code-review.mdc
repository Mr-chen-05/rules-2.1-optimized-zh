---
description: "Multi-role pull request review checklist - å¤šè§’è‰²æ‹‰å–è¯·æ±‚å®¡æŸ¥æ¸…å•"
globs: ["**/*"]
alwaysApply: false
---

# ğŸ” Code Review Workflow - ä»£ç å®¡æŸ¥å·¥ä½œæµ

å¤šè§’è‰²æ‹‰å–è¯·æ±‚å®¡æŸ¥æ¸…å•ï¼Œç¡®ä¿ä»£ç è´¨é‡å’Œå›¢é˜Ÿåä½œã€‚

## ğŸš€ Commands - å‘½ä»¤

- `/code-review` - å¯åŠ¨ä»£ç å®¡æŸ¥æµç¨‹
- `/review-checklist` - æ˜¾ç¤ºå®¡æŸ¥æ¸…å•
- `/security-review` - å®‰å…¨å®¡æŸ¥
- `/performance-review` - æ€§èƒ½å®¡æŸ¥

## ğŸ‘¥ Review Roles - å®¡æŸ¥è§’è‰²

### ğŸ§‘â€ğŸ’» Developer Review - å¼€å‘è€…å®¡æŸ¥
**å…³æ³¨ç‚¹ï¼šä»£ç é€»è¾‘ã€å¯è¯»æ€§ã€æœ€ä½³å®è·µ**

#### Checklist - æ£€æŸ¥æ¸…å•
- [ ] **ä»£ç é€»è¾‘æ­£ç¡®** - å®ç°ç¬¦åˆéœ€æ±‚ï¼Œé€»è¾‘æ¸…æ™°
- [ ] **å‘½åè§„èŒƒ** - å˜é‡ã€å‡½æ•°ã€ç±»åæœ‰æ„ä¹‰ä¸”ä¸€è‡´
- [ ] **ä»£ç å¤ç”¨** - é¿å…é‡å¤ä»£ç ï¼Œåˆç†æŠ½è±¡
- [ ] **é”™è¯¯å¤„ç†** - é€‚å½“çš„å¼‚å¸¸å¤„ç†å’Œè¾¹ç•Œæ¡ä»¶
- [ ] **æ³¨é‡Šè´¨é‡** - å¤æ‚é€»è¾‘æœ‰æ¸…æ™°æ³¨é‡Š
- [ ] **ä»£ç é£æ ¼** - éµå¾ªé¡¹ç›®ç¼–ç è§„èŒƒ

#### Questions to Ask - å®¡æŸ¥é—®é¢˜
- è¿™æ®µä»£ç æ˜¯å¦æ˜“äºç†è§£å’Œç»´æŠ¤ï¼Ÿ
- æ˜¯å¦æœ‰æ›´ç®€æ´çš„å®ç°æ–¹å¼ï¼Ÿ
- é”™è¯¯å¤„ç†æ˜¯å¦å……åˆ†ï¼Ÿ
- æ˜¯å¦éµå¾ªäº†SOLIDåŸåˆ™ï¼Ÿ

### ğŸ—ï¸ Architecture Review - æ¶æ„å®¡æŸ¥
**å…³æ³¨ç‚¹ï¼šè®¾è®¡æ¨¡å¼ã€ç³»ç»Ÿæ¶æ„ã€æ‰©å±•æ€§**

#### Checklist - æ£€æŸ¥æ¸…å•
- [ ] **è®¾è®¡æ¨¡å¼** - ä½¿ç”¨åˆé€‚çš„è®¾è®¡æ¨¡å¼
- [ ] **æ¨¡å—åˆ’åˆ†** - èŒè´£åˆ†ç¦»ï¼Œæ¨¡å—è¾¹ç•Œæ¸…æ™°
- [ ] **ä¾èµ–ç®¡ç†** - ä¾èµ–æ³¨å…¥ï¼Œé¿å…å¾ªç¯ä¾èµ–
- [ ] **æ¥å£è®¾è®¡** - APIè®¾è®¡åˆç†ï¼Œå‘åå…¼å®¹
- [ ] **æ‰©å±•æ€§** - ä»£ç æ˜“äºæ‰©å±•å’Œä¿®æ”¹
- [ ] **æ€§èƒ½è€ƒè™‘** - ç®—æ³•å¤æ‚åº¦åˆç†

#### Questions to Ask - å®¡æŸ¥é—®é¢˜
- è¿™ä¸ªè®¾è®¡æ˜¯å¦ç¬¦åˆç³»ç»Ÿæ•´ä½“æ¶æ„ï¼Ÿ
- æ˜¯å¦å¼•å…¥äº†ä¸å¿…è¦çš„å¤æ‚æ€§ï¼Ÿ
- å¦‚ä½•å¤„ç†æœªæ¥çš„éœ€æ±‚å˜æ›´ï¼Ÿ
- æ˜¯å¦æœ‰æ½œåœ¨çš„æ€§èƒ½ç“¶é¢ˆï¼Ÿ

### ğŸ”’ Security Review - å®‰å…¨å®¡æŸ¥
**å…³æ³¨ç‚¹ï¼šå®‰å…¨æ¼æ´ã€æ•°æ®ä¿æŠ¤ã€æƒé™æ§åˆ¶**

#### Checklist - æ£€æŸ¥æ¸…å•
- [ ] **è¾“å…¥éªŒè¯** - æ‰€æœ‰ç”¨æˆ·è¾“å…¥éƒ½ç»è¿‡éªŒè¯
- [ ] **SQLæ³¨å…¥é˜²æŠ¤** - ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
- [ ] **XSSé˜²æŠ¤** - è¾“å‡ºç¼–ç ï¼ŒCSPé…ç½®
- [ ] **è®¤è¯æˆæƒ** - æƒé™æ£€æŸ¥å®Œæ•´
- [ ] **æ•æ„Ÿæ•°æ®** - å¯†ç ã€tokenç­‰å®‰å…¨å­˜å‚¨
- [ ] **HTTPSä½¿ç”¨** - æ•æ„Ÿæ“ä½œä½¿ç”¨HTTPS

#### Questions to Ask - å®¡æŸ¥é—®é¢˜
- æ˜¯å¦å­˜åœ¨æ½œåœ¨çš„å®‰å…¨æ¼æ´ï¼Ÿ
- æ•æ„Ÿæ•°æ®æ˜¯å¦å¾—åˆ°é€‚å½“ä¿æŠ¤ï¼Ÿ
- æƒé™æ§åˆ¶æ˜¯å¦è¶³å¤Ÿä¸¥æ ¼ï¼Ÿ
- æ˜¯å¦éµå¾ªäº†å®‰å…¨æœ€ä½³å®è·µï¼Ÿ

### âš¡ Performance Review - æ€§èƒ½å®¡æŸ¥
**å…³æ³¨ç‚¹ï¼šæ€§èƒ½ä¼˜åŒ–ã€èµ„æºä½¿ç”¨ã€æ‰©å±•æ€§**

#### Checklist - æ£€æŸ¥æ¸…å•
- [ ] **ç®—æ³•æ•ˆç‡** - æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦åˆç†
- [ ] **æ•°æ®åº“æŸ¥è¯¢** - æŸ¥è¯¢ä¼˜åŒ–ï¼Œé¿å…N+1é—®é¢˜
- [ ] **ç¼“å­˜ç­–ç•¥** - åˆç†ä½¿ç”¨ç¼“å­˜
- [ ] **èµ„æºç®¡ç†** - å†…å­˜æ³„æ¼ï¼Œè¿æ¥æ± ç®¡ç†
- [ ] **å¹¶å‘å¤„ç†** - çº¿ç¨‹å®‰å…¨ï¼Œæ­»é”é¢„é˜²
- [ ] **ç›‘æ§æŒ‡æ ‡** - å…³é”®æ€§èƒ½æŒ‡æ ‡ç›‘æ§

#### Questions to Ask - å®¡æŸ¥é—®é¢˜
- è¿™æ®µä»£ç åœ¨é«˜è´Ÿè½½ä¸‹è¡¨ç°å¦‚ä½•ï¼Ÿ
- æ˜¯å¦æœ‰æ€§èƒ½ä¼˜åŒ–çš„ç©ºé—´ï¼Ÿ
- èµ„æºä½¿ç”¨æ˜¯å¦åˆç†ï¼Ÿ
- å¦‚ä½•ç›‘æ§å’Œè°ƒè¯•æ€§èƒ½é—®é¢˜ï¼Ÿ

## ğŸ“‹ Review Process - å®¡æŸ¥æµç¨‹

### 1. Pre-Review Preparation - å®¡æŸ¥å‰å‡†å¤‡
```bash
# æ£€æŸ¥PRä¿¡æ¯
- PRæ ‡é¢˜å’Œæè¿°æ¸…æ™°
- å…³è”ç›¸å…³Issue
- åŒ…å«æµ‹è¯•ç”¨ä¾‹
- CI/CDæ£€æŸ¥é€šè¿‡
```

### 2. Code Review Steps - ä»£ç å®¡æŸ¥æ­¥éª¤

#### Step 1: Overview - æ¦‚è§ˆ
- ç†è§£PRçš„ç›®çš„å’ŒèŒƒå›´
- æ£€æŸ¥æ–‡ä»¶å˜æ›´åˆ—è¡¨
- è¯„ä¼°å˜æ›´çš„å½±å“èŒƒå›´

#### Step 2: Detailed Review - è¯¦ç»†å®¡æŸ¥
- é€æ–‡ä»¶å®¡æŸ¥ä»£ç å˜æ›´
- åº”ç”¨ç›¸åº”è§’è‰²çš„æ£€æŸ¥æ¸…å•
- æ ‡è®°é—®é¢˜å’Œæ”¹è¿›å»ºè®®

#### Step 3: Testing Review - æµ‹è¯•å®¡æŸ¥
- æ£€æŸ¥æµ‹è¯•è¦†ç›–ç‡
- éªŒè¯æµ‹è¯•ç”¨ä¾‹è´¨é‡
- ç¡®è®¤è¾¹ç•Œæ¡ä»¶æµ‹è¯•

#### Step 4: Documentation Review - æ–‡æ¡£å®¡æŸ¥
- APIæ–‡æ¡£æ›´æ–°
- READMEå’Œä½¿ç”¨æŒ‡å—
- ä»£ç æ³¨é‡Šå®Œæ•´æ€§

### 3. Feedback Guidelines - åé¦ˆæŒ‡å—

#### åé¦ˆåˆ†ç±»
- **ğŸš¨ Must Fix** - å¿…é¡»ä¿®å¤çš„é—®é¢˜
- **ğŸ’¡ Suggestion** - æ”¹è¿›å»ºè®®
- **â“ Question** - éœ€è¦æ¾„æ¸…çš„é—®é¢˜
- **ğŸ‘ Praise** - å¥½çš„å®è·µå€¼å¾—è¡¨æ‰¬

#### åé¦ˆç¤ºä¾‹
```markdown
ğŸš¨ Must Fix: è¿™é‡Œå­˜åœ¨SQLæ³¨å…¥é£é™©
å»ºè®®ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ï¼š`SELECT * FROM users WHERE id = ?`

ğŸ’¡ Suggestion: è€ƒè™‘ä½¿ç”¨å·¥å‚æ¨¡å¼æ¥åˆ›å»ºä¸åŒç±»å‹çš„å¤„ç†å™¨
è¿™æ ·å¯ä»¥æé«˜ä»£ç çš„å¯æ‰©å±•æ€§

â“ Question: ä¸ºä»€ä¹ˆé€‰æ‹©è¿™ç§ç®—æ³•ï¼Ÿ
æ˜¯å¦è€ƒè™‘è¿‡æ—¶é—´å¤æ‚åº¦çš„å½±å“ï¼Ÿ

ğŸ‘ Praise: é”™è¯¯å¤„ç†å¾ˆå®Œå–„ï¼Œè¾¹ç•Œæ¡ä»¶è€ƒè™‘å‘¨å…¨
```

## ğŸ› ï¸ Tools Integration - å·¥å…·é›†æˆ

### Automated Checks - è‡ªåŠ¨åŒ–æ£€æŸ¥
```yaml
# GitHub Actions ç¤ºä¾‹
name: Code Review Automation
on: [pull_request]
jobs:
  code-quality:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Run ESLint
        run: npm run lint
      - name: Run Tests
        run: npm test
      - name: Security Scan
        run: npm audit
      - name: Performance Test
        run: npm run perf-test
```

### Review Templates - å®¡æŸ¥æ¨¡æ¿
```markdown
## Code Review Checklist

### Developer Review
- [ ] Code logic is correct
- [ ] Naming conventions followed
- [ ] Error handling appropriate
- [ ] Code is readable and maintainable

### Security Review
- [ ] Input validation implemented
- [ ] No SQL injection vulnerabilities
- [ ] Authentication/authorization proper
- [ ] Sensitive data protected

### Performance Review
- [ ] Algorithm efficiency acceptable
- [ ] Database queries optimized
- [ ] Resource usage reasonable
- [ ] Monitoring in place
```

## ğŸ“Š Review Metrics - å®¡æŸ¥æŒ‡æ ‡

### Quality Metrics - è´¨é‡æŒ‡æ ‡
- **Review Coverage** - å®¡æŸ¥è¦†ç›–ç‡
- **Defect Detection Rate** - ç¼ºé™·æ£€å‡ºç‡
- **Review Turnaround Time** - å®¡æŸ¥å‘¨è½¬æ—¶é—´
- **Rework Rate** - è¿”å·¥ç‡

### Tracking Template - è·Ÿè¸ªæ¨¡æ¿
```markdown
## Review Summary
- **Reviewer**: @username
- **Review Time**: 30 minutes
- **Issues Found**: 3 must-fix, 2 suggestions
- **Security Issues**: 1
- **Performance Issues**: 0
- **Overall Rating**: Approve with changes
```

## âœ… Best Practices - æœ€ä½³å®è·µ

### For Reviewers - å®¡æŸ¥è€…
- **åŠæ—¶å®¡æŸ¥** - åœ¨24å°æ—¶å†…å®Œæˆå®¡æŸ¥
- **å»ºè®¾æ€§åé¦ˆ** - æä¾›å…·ä½“çš„æ”¹è¿›å»ºè®®
- **å¹³è¡¡ä¸¥æ ¼æ€§** - æ—¢è¦ä¿è¯è´¨é‡ï¼Œä¹Ÿè¦è€ƒè™‘æ•ˆç‡
- **å­¦ä¹ å¿ƒæ€** - ä»ä»£ç ä¸­å­¦ä¹ æ–°çš„æŠ€æœ¯å’Œæ–¹æ³•

### For Authors - ä½œè€…
- **å°è€Œé¢‘ç¹** - ä¿æŒPRå¤§å°åˆç†ï¼ˆ<400è¡Œï¼‰
- **æ¸…æ™°æè¿°** - è¯¦ç»†è¯´æ˜å˜æ›´å†…å®¹å’ŒåŸå› 
- **è‡ªæˆ‘å®¡æŸ¥** - æäº¤å‰å…ˆè‡ªå·±å®¡æŸ¥ä¸€é
- **ç§¯æå“åº”** - åŠæ—¶å›åº”å®¡æŸ¥æ„è§

### For Teams - å›¢é˜Ÿ
- **å®¡æŸ¥æ–‡åŒ–** - å»ºç«‹ç§¯æçš„ä»£ç å®¡æŸ¥æ–‡åŒ–
- **çŸ¥è¯†åˆ†äº«** - é€šè¿‡å®¡æŸ¥åˆ†äº«æœ€ä½³å®è·µ
- **æŒç»­æ”¹è¿›** - å®šæœŸå›é¡¾å’Œæ”¹è¿›å®¡æŸ¥æµç¨‹
- **å·¥å…·æ”¯æŒ** - ä½¿ç”¨åˆé€‚çš„å·¥å…·æé«˜æ•ˆç‡
